@page
@using Devblog_Library.Models
@model Devblog.Pages.Admin.CreateModel
@{
}

<head>
    <link rel="stylesheet" href="~/css/Styles.css">
</head>

<body>
    <div class="slider-container">
        <input type="checkbox" id="toggle-slider" class="toggle-slider">
        <label for="toggle-slider" class="slider-label"></label>
    </div>

    <div id="content-left" class="content">
        <div class="col mt-1">
            <form method="post" asp-page-handler="CreatePost">
                <div id="TitleDiv" class="row justify-content-center mb-4">
                    <label>Title: </label>
                    <input name="Title" required />
                    <span class="alert-danger" asp-validation-for="Title"></span>
                </div>

                <div id="ReferenceDiv" class="row justify-content-center mb-4">
                    <label>Reference: </label>
                    <input name="Reference" required />
                    <span class="alert-danger" asp-validation-for="Reference"></span>
                </div>

                <div id="TypesDiv" class="row justify-content-center mb-4">
                    <label>
                        <input name="PostTypes" id="BlogPost" value="BlogPost" type="radio" required /> BlogPost
                    </label>
                    <span class="alert-danger" asp-validation-for="PostTypes"></span>

                    <label>
                        <input name="PostTypes" id="Review" value="Review" type="radio" required /> Review
                    </label>
                    <span class="alert-danger" asp-validation-for="PostTypes"></span>

                    <label>
                        <input name="PostTypes" id="Project" value="Project" type="radio" required /> Project
                    </label>
                    <span class="alert-danger" asp-validation-for="PostTypes"></span>
                </div>

                <!-- BlogPost Fields -->
                <div id="BlogPostDiv" checkboxids="BlogPost" class="row justify-content-center mb-4">
                    <label>Weblog: </label>
                    <input name="Weblog" required />
                    <span class="alert-danger" asp-validation-for="Weblog"></span>
                </div>

                <!-- Review Fields -->
                <div id="ReviewDiv" checkboxids="Review" class="row justify-content-center mb-4">
                    <label>Pros: </label>
                    <input name="Pros" required />
                    <span class="alert-danger" asp-validation-for="Pros"></span>

                    <label>Cons: </label>
                    <input name="Cons" required />
                    <span class="alert-danger" asp-validation-for="Cons"></span>

                    <label>Stars: </label>
                    <input name="Stars" type="number" required />
                    <span class="alert-danger" asp-validation-for="Stars"></span>
                </div>

                <!-- Project Fields -->
                <div id="ProjectDiv" checkboxids="Project" class="row justify-content-center mb-4">
                    <label>Description: </label>
                    <input name="Description" required />
                    <span class="alert-danger" asp-validation-for="Description"></span>

                    <label>Image: </label>
                    <input name="Image" required />
                    <span class="alert-danger" asp-validation-for="Image"></span>
                </div>

                <button type="submit" class="btn btn-success btn-lg col-3 font-weight-bold">Create Post</button>
            </form>
        </div>
    </div>

    <div id="content-right" class="content hidden">
        <div class="col mt-1">
            <form method="post" asp-page-handler="CreateTag">
                <div id="TagNameDiv" class="row justify-content-center mb-4">
                    <label>Tag Name: </label>
                    <input name="TagName" required />
                    <span class="alert-danger" asp-validation-for="TagName"></span>
                </div>

                <button type="submit" class="btn btn-success btn-lg col-3 font-weight-bold">Create Tag</button>
            </form>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const toggleSlider = document.getElementById('toggle-slider');
            const contentLeft = document.getElementById('content-left');
            const contentRight = document.getElementById('content-right');

            toggleSlider.addEventListener('change', function () {
                if (toggleSlider.checked) {
                    contentLeft.classList.add('hidden');
                    contentRight.classList.remove('hidden');
                    @Model.SliderIsChecked = true;
                } else {
                    contentLeft.classList.remove('hidden');
                    contentRight.classList.add('hidden');
                    @Model.SliderIsChecked = false;
                }
            });
        });
    </script>
    @if (!Model.SliderIsChecked)
    {
        <script>
            $(document).ready(function() {
            // Initially hide all fields
            $("div[checkboxids]").hide();

            // Function to update required fields based on selected post type
            function toggleRequiredFields() {
                $("input").removeAttr("required"); // Clear all required attributes

                // Add 'required' to the fields based on selected type
                if ($("#Project").is(":checked")) {
                    $("div[checkboxids='Project'] input").attr("required", "required");
                } else if ($("#Review").is(":checked")) {
                    $("div[checkboxids='Review'] input").attr("required", "required");
                } else if ($("#BlogPost").is(":checked")) {
                    $("div[checkboxids='BlogPost'] input").attr("required", "required");
                }
            }

            // Handle radio button click
            $("input:radio").click(function () {
                $("div[checkboxids]").hide(); // Hide all fields

                // Show the fields associated with the selected radio button
                $("input:checked").each(function () {
                    $("div[checkboxids*='" + $(this).attr("id") + "']").show(); // Show selected fields
                });

                toggleRequiredFields(); // Ensure required fields are updated based on selection
            });
        });
        </script>
    }
</body>